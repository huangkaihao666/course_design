# ç”µå•†è¯„è®ºåˆ†æç³»ç»Ÿ

ä¸€ä¸ªåŸºäºNext.jsçš„å…¨æ ˆç”µå•†è¯„è®ºåˆ†æç³»ç»Ÿï¼Œé›†æˆPythonçˆ¬è™«è·å–æ·˜å®/å¤©çŒ«å•†å“è¯„è®ºï¼Œå¹¶è¿›è¡Œæƒ…æ„Ÿåˆ†æå’Œæ•°æ®ç»Ÿè®¡ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ•·ï¸ **è¯„è®ºçˆ¬å–**: é›†æˆPythonçˆ¬è™«ï¼Œè‡ªåŠ¨æŠ“å–å•†å“è¯„è®º
- ğŸ§  **æƒ…æ„Ÿåˆ†æ**: æ™ºèƒ½åˆ†æè¯„è®ºæƒ…æ„Ÿå€¾å‘ï¼ˆæ­£é¢/è´Ÿé¢/ä¸­æ€§ï¼‰
- ğŸ“Š **æ•°æ®å¯è§†åŒ–**: ç›´è§‚å±•ç¤ºæƒ…æ„Ÿåˆ†å¸ƒã€è¯„åˆ†ç»Ÿè®¡ç­‰æ•°æ®
- ğŸ” **å…³é”®è¯æå–**: è‡ªåŠ¨æå–é«˜é¢‘å…³é”®è¯ï¼Œäº†è§£ç”¨æˆ·å…³æ³¨ç‚¹
- ğŸ“± **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨ç«¯è®¿é—®

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **Next.js 15**: Reactå…¨æ ˆæ¡†æ¶
- **TypeScript**: ç±»å‹å®‰å…¨çš„JavaScript
- **Tailwind CSS**: ç°ä»£CSSæ¡†æ¶
- **Chart.js**: æ•°æ®å¯è§†åŒ–å›¾è¡¨åº“
- **Lucide React**: ç°ä»£å›¾æ ‡åº“

### åç«¯
- **Next.js API Routes**: æœåŠ¡ç«¯API
- **Python 3**: çˆ¬è™«è„šæœ¬
- **Requests**: HTTPè¯·æ±‚åº“

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# å®‰è£…Node.jsä¾èµ–
pnpm install

# å®‰è£…Pythonä¾èµ–
cd ../pachong
pip3 install -r requirements.txt
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
pnpm dev
```

è®¿é—® http://localhost:3000 æŸ¥çœ‹åº”ç”¨ã€‚

### 3. ä½¿ç”¨è¯´æ˜

1. **è·å–å•†å“ID**:
   - è®¿é—®æ·˜å®/å¤©çŒ«å•†å“é¡µé¢
   - ä»URLä¸­æå–å•†å“IDï¼ˆå¦‚ï¼š`https://detail.tmall.com/item.htm?id=969932796642` ä¸­çš„ `969932796642`ï¼‰

2. **æ›´æ–°Cookies**ï¼ˆå¦‚éœ€è¦ï¼‰:
   - æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
   - è®¿é—®å•†å“è¯„è®ºé¡µé¢
   - å¤åˆ¶è¯„è®ºAPIè¯·æ±‚çš„Cookie
   - æ›´æ–° `../pachong/spider.py` ä¸­çš„cookies

3. **åˆ†æè¯„è®º**:
   - åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥å•†å“ID
   - ç‚¹å‡»"åŠ è½½ç°æœ‰"æŸ¥çœ‹å·²çˆ¬å–çš„æ•°æ®
   - ç‚¹å‡»"é‡æ–°çˆ¬å–"è·å–æœ€æ–°è¯„è®ºæ•°æ®

## APIæ¥å£

### çˆ¬å–è¯„è®º
```
POST /api/crawl
{
  "productId": "969932796642",
  "maxPages": 3
}
```

### è·å–è¯„è®º
```
GET /api/crawl?productId=969932796642
```

### æƒ…æ„Ÿåˆ†æ
```
POST /api/sentiment
{
  "comments": [...]
}
```

## æ•°æ®ç»“æ„

### è¯„è®ºæ•°æ®
```typescript
interface Comment {
  user_nick: string;      // ç”¨æˆ·æ˜µç§°
  content: string;        // è¯„è®ºå†…å®¹
  rating: number;         // è¯„åˆ† (1-10)
  date: string;           // è¯„è®ºæ—¥æœŸ
  useful_count: number;   // ç‚¹èµæ•°
  reply: string;          // å•†å®¶å›å¤
  sku_info: string;       // å•†å“è§„æ ¼
  pics: string[];         // è¯„è®ºå›¾ç‰‡
}
```

### æƒ…æ„Ÿåˆ†æç»“æœ
```typescript
interface SentimentResult {
  sentiment: 'positive' | 'negative' | 'neutral';
  score: number;          // æƒ…æ„Ÿå¾—åˆ† (0-1)
  confidence: number;     // ç½®ä¿¡åº¦ (0-1)
}
```

## é¡¹ç›®ç»“æ„

```
my-next-app/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/                    # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ crawl/             # çˆ¬è™«API
â”‚   â”‚   â””â”€â”€ sentiment/         # æƒ…æ„Ÿåˆ†æAPI
â”‚   â”œâ”€â”€ components/            # Reactç»„ä»¶
â”‚   â”‚   â””â”€â”€ CommentAnalytics.tsx
â”‚   â”œâ”€â”€ types/                 # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ page.tsx              # ä¸»é¡µé¢
â”œâ”€â”€ pachong/                   # Pythonçˆ¬è™«
â”‚   â”œâ”€â”€ spider.py             # çˆ¬è™«ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ output/               # çˆ¬å–æ•°æ®è¾“å‡ºç›®å½•
â”‚   â””â”€â”€ requirements.txt      # Pythonä¾èµ–
â””â”€â”€ README.md
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„æƒ…æ„Ÿåˆ†æç®—æ³•

1. ä¿®æ”¹ `app/api/sentiment/route.ts` ä¸­çš„ `analyzeSentiment` å‡½æ•°
2. å¯ä»¥é›†æˆç¬¬ä¸‰æ–¹æƒ…æ„Ÿåˆ†æAPIæˆ–æœºå™¨å­¦ä¹ æ¨¡å‹
3. è°ƒæ•´æƒ…æ„Ÿè¯å…¸å’Œæƒé‡

### æ‰©å±•æ•°æ®å¯è§†åŒ–

1. åœ¨ `app/components/CommentAnalytics.tsx` ä¸­æ·»åŠ æ–°çš„å›¾è¡¨
2. ä½¿ç”¨Chart.jsæ”¯æŒçš„å…¶ä»–å›¾è¡¨ç±»å‹
3. æ·»åŠ æ›´å¤šç»Ÿè®¡ç»´åº¦

### ä¼˜åŒ–çˆ¬è™«

1. ä¿®æ”¹ `pachong/spider.py` ä¸­çš„çˆ¬å–é€»è¾‘
2. æ·»åŠ æ›´å¤šåçˆ¬è™«æªæ–½
3. æ”¯æŒæ›´å¤šç”µå•†å¹³å°

## æ³¨æ„äº‹é¡¹

- è¯·éµå®ˆç½‘ç«™çš„robots.txtå’Œä½¿ç”¨æ¡æ¬¾
- åˆç†æ§åˆ¶çˆ¬å–é¢‘ç‡ï¼Œé¿å…å¯¹æœåŠ¡å™¨é€ æˆå‹åŠ›
- å®šæœŸæ›´æ–°cookiesä»¥ä¿æŒçˆ¬è™«æ­£å¸¸å·¥ä½œ
- ä»…ç”¨äºå­¦ä¹ å’Œç ”ç©¶ç›®çš„

## è®¸å¯è¯

MIT License